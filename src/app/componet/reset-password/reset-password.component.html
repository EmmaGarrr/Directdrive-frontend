<div class="reset-password-container">
  <div class="reset-password-card">
    <div class="reset-password-header">
      <h2>Reset Password</h2>
      <p>Enter your new password below.</p>
    </div>

    <div *ngIf="!passwordReset && tokenValid" class="reset-password-form">
      <form [formGroup]="resetPasswordForm" (ngSubmit)="onSubmit()">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>New Password</mat-label>
          <input matInput type="password" formControlName="new_password" placeholder="Enter new password">
          <mat-error *ngIf="resetPasswordForm.get('new_password')?.hasError('required')">
            New password is required
          </mat-error>
          <mat-error *ngIf="resetPasswordForm.get('new_password')?.hasError('minlength')">
            Password must be at least 8 characters long
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Confirm New Password</mat-label>
          <input matInput type="password" formControlName="confirm_password" placeholder="Confirm new password">
          <mat-error *ngIf="resetPasswordForm.get('confirm_password')?.hasError('required')">
            Please confirm your password
          </mat-error>
          <mat-error *ngIf="resetPasswordForm.get('confirm_password')?.hasError('passwordMismatch')">
            Passwords do not match
          </mat-error>
        </mat-form-field>

        <button 
          mat-raised-button 
          color="primary" 
          type="submit" 
          class="full-width submit-button"
          [disabled]="!resetPasswordForm.valid || isLoading">
          <mat-spinner *ngIf="isLoading" diameter="20" class="spinner"></mat-spinner>
          <span *ngIf="!isLoading">Reset Password</span>
        </button>
      </form>

      <div class="reset-password-actions">
        <button mat-button (click)="goToLogin()">Back to Login</button>
        <button mat-button (click)="goToForgotPassword()">Request New Link</button>
      </div>
    </div>

    <div *ngIf="passwordReset" class="password-reset-success">
      <mat-icon class="success-icon">check_circle</mat-icon>
      <h3>Password Reset Successfully!</h3>
      <p>Your password has been updated. You can now log in with your new password.</p>
      
      <div class="password-reset-actions">
        <button mat-raised-button color="primary" (click)="goToLogin()">
          Go to Login
        </button>
      </div>
    </div>

    <div *ngIf="!tokenValid" class="invalid-token">
      <mat-icon class="error-icon">error</mat-icon>
      <h3>Invalid Reset Link</h3>
      <p>The password reset link is invalid or has expired.</p>
      
      <div class="invalid-token-actions">
        <button mat-raised-button color="primary" (click)="goToForgotPassword()">
          Request New Reset Link
        </button>
      </div>
    </div>
  </div>
</div> 